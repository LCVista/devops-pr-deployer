terraform destroy -no-color --auto-approve

Error: deleting Security Group (sg-08c911225fde257f7): operation error EC2: DeleteSecurityGroup, https response error StatusCode: 400, RequestID: a75c53a1-fd2f-42d1-b5dc-022a800a01aa, api error DependencyViolation: resource sg-08c911225fde257f7 has a dependent object

I received an error running the exec command

Error: deleting Security Group (sg-08c911225fde257f7): operation error EC2: DeleteSecurityGroup, https response error StatusCode: 400, RequestID: a75c53a1-fd2f-42d1-b5dc-022a800a01aa, api error DependencyViolation: resource sg-08c911225fde257f7 has a dependent object


module.pr.module.lcv.data.aws_ecr_repository.selected: Reading...
module.pr.data.aws_canonical_user_id.current: Reading...
module.pr.data.aws_vpc.selected: Reading...
module.pr.data.aws_db_snapshot.most_recent_prod_snapshot: Reading...
module.pr.data.aws_kms_key.staging: Reading...
module.pr.data.aws_elasticache_cluster.shared_redis: Reading...
module.pr.data.aws_caller_identity.current: Reading...
module.pr.data.aws_secretsmanager_secret.shared_db: Reading...
module.pr.data.aws_secretsmanager_secret.shared_cognito: Reading...
module.pr.data.aws_caller_identity.current: Read complete after 0s [id=690287814337]
module.pr.data.aws_route53_zone.selected: Reading...
module.pr.module.lcv.data.aws_caller_identity.current: Reading...
module.pr.data.aws_canonical_user_id.current: Read complete after 0s [id=cea4b19bbe95579577314b9df712a54ea28410ac5a82867436539fb90abae87e]
module.pr.data.aws_db_snapshot.most_recent_prod_snapshot: Read complete after 0s [id=prod-db-01-lambda-snapshot-2026-02-02-encrypted]
module.pr.data.aws_secretsmanager_secret.shared_lcv: Reading...
module.pr.module.lcv.data.aws_caller_identity.current: Read complete after 0s [id=690287814337]
module.pr.data.aws_kms_key.staging: Read complete after 0s [id=8c572825-2775-4abe-8591-3534018d37fb]
module.pr.data.aws_secretsmanager_secret.shared_db: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:shared-qa/db-7nA8UQ]
module.pr.data.aws_secretsmanager_secret.shared_cognito: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:dev/cognito-EAFU3U]
module.pr.data.aws_secretsmanager_secret.shared_lcv: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:staging/lcv-oW1sCX]
module.pr.data.aws_secretsmanager_secret_version.shared_lcv: Reading...
module.pr.data.aws_secretsmanager_secret_version.shared_db: Reading...
module.pr.data.aws_elasticache_cluster.shared_redis: Read complete after 0s [id=tenants-dev]
module.pr.data.aws_secretsmanager_secret_version.shared_cognito: Reading...
module.pr.data.aws_secretsmanager_secret_version.shared_lcv: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:staging/lcv-oW1sCX|AWSCURRENT]
module.pr.data.aws_secretsmanager_secret_version.shared_db: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:shared-qa/db-7nA8UQ|AWSCURRENT]
module.pr.data.aws_secretsmanager_secret_version.shared_cognito: Read complete after 0s [id=arn:aws:secretsmanager:us-west-2:690287814337:secret:dev/cognito-EAFU3U|AWSCURRENT]
module.pr.data.aws_vpc.selected: Read complete after 1s [id=vpc-0be40cfe7e45ce83f]
module.pr.module.lcv.data.aws_subnets.public: Reading...
module.pr.data.aws_subnets.public: Reading...
module.pr.module.lcv.data.aws_vpc.selected: Reading...
module.pr.data.aws_subnets.private: Reading...
module.pr.module.lcv.data.aws_subnets.private: Reading...
module.pr.module.lcv.data.aws_subnets.public: Read complete after 0s [id=us-west-2]
module.pr.module.lcv.data.aws_subnets.private: Read complete after 0s [id=us-west-2]
module.pr.data.aws_subnets.public: Read complete after 0s [id=us-west-2]
module.pr.data.aws_subnets.private: Read complete after 0s [id=us-west-2]
module.pr.data.aws_route53_zone.selected: Read complete after 1s [id=Z0618862QAYDXWAFVBP0]
module.pr.module.lcv.data.aws_vpc.selected: Read complete after 0s [id=vpc-0be40cfe7e45ce83f]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Refreshing state... [id=sg-08c911225fde257f7]
module.pr.module.lcv.data.aws_ecr_repository.selected: Read complete after 3s [id=lcv]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # module.pr.module.lcv.aws_security_group.lcv_shared_sg will be destroyed
  - resource "aws_security_group" "lcv_shared_sg" {
      - arn                    = "arn:aws:ec2:us-west-2:690287814337:security-group/sg-08c911225fde257f7" -> null
      - description            = "Shared security group for all lcv roles" -> null
      - egress                 = [
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 08m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 08m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 08m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 08m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 08m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 09m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 10m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 11m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 12m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 13m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m20s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m30s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m40s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 14m50s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 15m00s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 15m10s elapsed]
module.pr.module.lcv.aws_security_group.lcv_shared_sg: Still destroying... [id=sg-08c911225fde257f7, 15m20s elapsed]


Created comment id '3835973908' on issue '17116'.

